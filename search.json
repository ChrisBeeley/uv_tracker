[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Clear sky UV graph",
    "section": "",
    "text": "library(httr)\nlibrary(jsonlite)\nlibrary(ggplot2)\nlibrary(lubridate)\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\napi_key &lt;- Sys.getenv(\"API\")\n\n# api_key &lt;- readLines(\"api-key\")\n\n# Set up the headers\nmy_headers &lt;- add_headers(\n  \"x-access-token\" = api_key,\n  \"Content-Type\" = \"application/json\"\n)\n\n# Define the URL\nurl &lt;- \"https://api.openuv.io/api/v1/forecast?lat=52.98&lng=-1.16&alt=100&dt=\"\n\n# Make the GET request\nresponse &lt;- GET(url, my_headers)\n\n# Check the status code and content\nif (status_code(response) == 200) {\n  # Parse the JSON response\n  result &lt;- fromJSON(content(response, \"text\", encoding = \"UTF-8\"))\n  #print(result)\n} else {\n  # Handle errors\n  print(paste(\"Error:\", status_code(response), content(response, \"text\")))\n}\n\n[1] \"Error: 403 {\\\"error\\\":\\\"No API Key provided\\\"}\"\n\nprint(str(response))\n\nList of 10\n $ url        : chr \"https://api.openuv.io/api/v1/forecast?lat=52.98&lng=-1.16&alt=100&dt=\"\n $ status_code: int 403\n $ headers    :List of 13\n  ..$ access-control-allow-origin: chr \"*\"\n  ..$ content-type               : chr \"application/json; charset=utf-8\"\n  ..$ date                       : chr \"Mon, 26 May 2025 15:49:28 GMT\"\n  ..$ etag                       : chr \"W/\\\"1f-CZEapy/FeOIkCdFIYCZa/F2PdQY\\\"\"\n  ..$ nel                        : chr \"{\\\"report_to\\\":\\\"heroku-nel\\\",\\\"response_headers\\\":[\\\"Via\\\"],\\\"max_age\\\":3600,\\\"success_fraction\\\":0.01,\\\"failu\"| __truncated__\n  ..$ report-to                  : chr \"{\\\"group\\\":\\\"heroku-nel\\\",\\\"endpoints\\\":[{\\\"url\\\":\\\"https://nel.heroku.com/reports?s=ycnvXxoysEYQRRmecFDW0AcwVh\"| __truncated__\n  ..$ reporting-endpoints        : chr \"heroku-nel=\\\"https://nel.heroku.com/reports?s=ycnvXxoysEYQRRmecFDW0AcwVhED3yTCnKJtz4WPH0U%3D&sid=67ff5de4-ad2b-\"| __truncated__\n  ..$ server                     : chr \"Heroku\"\n  ..$ via                        : chr \"2.0 heroku-router\"\n  ..$ x-powered-by               : chr \"Express\"\n  ..$ x-ratelimit-limit          : chr \"50\"\n  ..$ x-ratelimit-remaining      : chr \"49\"\n  ..$ content-length             : chr \"31\"\n  ..- attr(*, \"class\")= chr [1:2] \"insensitive\" \"list\"\n $ all_headers:List of 1\n  ..$ :List of 3\n  .. ..$ status : int 403\n  .. ..$ version: chr \"HTTP/2\"\n  .. ..$ headers:List of 13\n  .. .. ..$ access-control-allow-origin: chr \"*\"\n  .. .. ..$ content-type               : chr \"application/json; charset=utf-8\"\n  .. .. ..$ date                       : chr \"Mon, 26 May 2025 15:49:28 GMT\"\n  .. .. ..$ etag                       : chr \"W/\\\"1f-CZEapy/FeOIkCdFIYCZa/F2PdQY\\\"\"\n  .. .. ..$ nel                        : chr \"{\\\"report_to\\\":\\\"heroku-nel\\\",\\\"response_headers\\\":[\\\"Via\\\"],\\\"max_age\\\":3600,\\\"success_fraction\\\":0.01,\\\"failu\"| __truncated__\n  .. .. ..$ report-to                  : chr \"{\\\"group\\\":\\\"heroku-nel\\\",\\\"endpoints\\\":[{\\\"url\\\":\\\"https://nel.heroku.com/reports?s=ycnvXxoysEYQRRmecFDW0AcwVh\"| __truncated__\n  .. .. ..$ reporting-endpoints        : chr \"heroku-nel=\\\"https://nel.heroku.com/reports?s=ycnvXxoysEYQRRmecFDW0AcwVhED3yTCnKJtz4WPH0U%3D&sid=67ff5de4-ad2b-\"| __truncated__\n  .. .. ..$ server                     : chr \"Heroku\"\n  .. .. ..$ via                        : chr \"2.0 heroku-router\"\n  .. .. ..$ x-powered-by               : chr \"Express\"\n  .. .. ..$ x-ratelimit-limit          : chr \"50\"\n  .. .. ..$ x-ratelimit-remaining      : chr \"49\"\n  .. .. ..$ content-length             : chr \"31\"\n  .. .. ..- attr(*, \"class\")= chr [1:2] \"insensitive\" \"list\"\n $ cookies    :'data.frame':    0 obs. of  7 variables:\n  ..$ domain    : logi(0) \n  ..$ flag      : logi(0) \n  ..$ path      : logi(0) \n  ..$ secure    : logi(0) \n  ..$ expiration: 'POSIXct' num(0) \n  ..$ name      : logi(0) \n  ..$ value     : logi(0) \n $ content    : raw [1:31] 7b 22 65 72 ...\n $ date       : POSIXct[1:1], format: \"2025-05-26 15:49:28\"\n $ times      : Named num [1:6] 0 0.0024 0.0233 0.0474 0.0699 ...\n  ..- attr(*, \"names\")= chr [1:6] \"redirect\" \"namelookup\" \"connect\" \"pretransfer\" ...\n $ request    :List of 7\n  ..$ method    : chr \"GET\"\n  ..$ url       : chr \"https://api.openuv.io/api/v1/forecast?lat=52.98&lng=-1.16&alt=100&dt=\"\n  ..$ headers   : Named chr [1:3] \"application/json, text/xml, application/xml, */*\" \"\" \"application/json\"\n  .. ..- attr(*, \"names\")= chr [1:3] \"Accept\" \"x-access-token\" \"Content-Type\"\n  ..$ fields    : NULL\n  ..$ options   :List of 2\n  .. ..$ useragent: chr \"libcurl/8.5.0 r-curl/6.2.3 httr/1.4.7\"\n  .. ..$ httpget  : logi TRUE\n  ..$ auth_token: NULL\n  ..$ output    : list()\n  .. ..- attr(*, \"class\")= chr [1:2] \"write_memory\" \"write_function\"\n  ..- attr(*, \"class\")= chr \"request\"\n $ handle     :Class 'curl_handle' &lt;externalptr&gt; \n - attr(*, \"class\")= chr \"response\"\nNULL\n\n#df &lt;- result$result |&gt;\n#    dplyr::mutate(uv_time = ymd_hms(uv_time))\n \n#df |&gt;\n#    ggplot(aes(x = uv_time, y = uv, group = 1)) +\n#    geom_point() +\n#    geom_line()"
  }
]